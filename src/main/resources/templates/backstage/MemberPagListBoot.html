<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>MemberList</title>
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script type="text/javascript" src="/NeverStarve/js/jquery-2.2.3.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<link rel='stylesheet' th:href="@{/css/index.css}" type="text/css" />	
<style th:inline="css">
.table{
	margin:auto ;
	margin-top:50px;  	
	width: 1300px;
	text-align:center;
	align-items: center
	
}
.center{
	text-align:center;
	margin:auto ;
	
}
</style>
<script type="text/javascript" th:inline="javascript">
$(function(){
	var pag =/*[[${pageNo}]]*/ 
	console.log(pag);
	var nex =/*[[${pageNo}+1]]*/
	console.log(pag);
	var back=/*[[${pageNo}-1]]*/
	console.log(pag);
	var tl =/*[[${totalPages}]]*/
	console.log(pag);
	if(pag==1){
		$("#but0").attr("disabled", true);
		$("#but00").attr("disabled", true);
	}
	
	$("#but00").click(function(){
		$.ajax({
		type:"GET",
		contentType:"application/json",
		url:"http://localhost:9527/NeverStarve/Member/DisplayPageProducts",
		data:{"pageNo":1},  //輸入傳值		
		dataType: "html", 
		async: true,
        cache: false,
		success:function (data) {
			$(".article_type").html(data);
		}
		});
	});
	
	$("#but0").click(function(){
		$.ajax({
		type:"GET",
		contentType:"application/json",
		url:"http://localhost:9527/NeverStarve/Member/DisplayPageProducts",
		data:{"pageNo":back },  //輸入傳值		
		dataType: "html", 
		async: true,
        cache: false,
		success:function (data) {
			
				$(".article_type").html(data);
				if(pag ==1){
					$("#but0").attr("disabled", true);
				}				
		}

		});
	});
	
	$("#but1").click(function(){
		$.ajax({
		type:"GET",
		contentType:"application/json",
		url:"http://localhost:9527/NeverStarve/Member/DisplayPageProducts",
		data:{"pageNo":nex},  //輸入傳值		
		dataType: "html", 
		async: true,
        cache: false,
		success:function (data) {
			
				$(".article_type").html(data);
				if(nex==tl){
					$("#but1").attr("disabled", true);
					$("#but2").attr("disabled", true);
					
				}
				if(pag!=1){
					$("#but0").attr("disabled", false);
				}else{$("#but0").attr("disabled", true);
				}				
		}
		});
	});
	
	$("#but2").click(function(){
		$.ajax({
		type:"GET",
		contentType:"application/json",
		url:"http://localhost:9527/NeverStarve/Member/DisplayPageProducts",
		data:{"pageNo":pag},  //輸入傳值		
		dataType: "html", 
		async: true,
        cache: false,
		success:function (data) {
			$(".article_type").html(data);	
			$("#but1").attr("disabled", true);
			$("#but2").attr("disabled", true);
		}
		});
	});
	
})

</script>
</head>
<body class="article_type" th:fragment="article_type" th:inline="text" >
	<div th:insert="Generic :: Header"></div>
	<div>
	<div th:inline="text" style="height: 520px;" >
		<table width=400px; class="table table-striped table-dark " >
			<thead>
				<tr>
				<th>會員編號</th>
				<th>會員姓名</th>
				<th>會員地址</th>
				<th>電子信箱</th>
				<th>會員密碼</th>
				<th>電話號碼</th>
				<th>會員等級</th>
				<th>註冊時間</th>
				<th>會員圖片</th>
				</tr>		
			</thead>
			<tbody>
				<tr th:each="member,loopStatus: ${products_DPP}">
				<th valign="middle"><a href=/yahoo.com.tw>[[${member.value.pkMemberId}]] </a></th>
				<td valign="middle">[[${member.value.name}]] </td>
				<td valign="middle">[[${member.value.address}]]</td>
				<td valign="middle">[[${member.value.email}]] </td>
				<td valign="middle">[[${member.value.password}]] </td>
				<td valign="middle">[[${member.value.mobilePhone}]]</td>
				<td valign="middle">[[${member.value.userType}]] </td>
				<td valign="middle">[[${member.value.registerTime}]] </td>
				<td ><img height="120" th:src='${member.value.bas64}'> </td>
				</tr>
			</tbody>
		</table>
	</div>
		<div  class="center" >	
			<button id="but00" width='250px' >第一頁</button>
			<button id="but0" width='250px' >上一頁</button>
			<span>[[${pageNo}]] / [[${totalPages}]]</span>
			<button id="but1" width='250px' >下一頁</button>
			<button id="but2" width='250px' >最尾頁</button>
		</div>
	</div>

	
</body>
</html>